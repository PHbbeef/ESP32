# 安装库
+ IRremoteESP8266


# 解码
`IRremoteESP8266`示例`IRrecvDumpV2`

+ 这里可以更改引脚（源引引脚`14`）

+ 串口监视器`115200`（显示红外数据）


# 发送
```C++
#include <Arduino.h>
#include <IRremoteESP8266.h>
#include <IRsend.h>
#include <DFRobot_DHT11.h>;  // 温度传感器DHT11依赖

#define DHT11_PIN 13  // 温度传感器引脚，GPIO13--D7
const uint16_t kIrLed = 4;  // ESP8266 GPIO pin to use. Recommended: 4 (D2).

// 开空调指令
uint16_t ACon[273] = {4490, 4400,  504, 1670,  480, 594,  482, 1670,  480, 1668,  482, 592,  482, 594,  482, 1668,  482, 594,  480, 594,  482, 1668,  482, 592,  482, 592,  482, 1670,  480, 1668,  482, 592,  482, 1670,  482, 1668,  480, 594,  480, 1670,  480, 1670,  478, 1670,  480, 1670,  478, 1670,  478, 1672,  478, 596,  478, 1672,  480, 596,  478, 596,  480, 596,  476, 598,  454, 620,  452, 622,  402, 1750,  400, 674,  422, 652,  422, 652,  422, 652,  424, 650,  426, 650,  446, 628,  450, 626,  450, 1700,  474, 1676,  474, 1676,  476, 1674,  476, 1674,  476, 1674,  476, 1672,  478, 5276,  4326, 4434,  470, 1700,  448, 624,  454, 1700,  448, 1686,  466, 624,  452, 622,  452, 1680,  470, 622,  454, 622,  454, 1698,  452, 620,  454, 622,  454, 1696,  476, 1674,  478, 598,  478, 1670,  482, 1668,  480, 594,  482, 1668,  480, 1668,  482, 1668,  482, 1668,  482, 1668,  454, 1694,  456, 618,  456, 1696,  454, 620,  456, 618,  456, 618,  456, 618,  454, 620,  454, 620,  456, 1694,  456, 620,  424, 650,  424, 650,  424, 650,  426, 648,  426, 650,  424, 650,  424, 650,  448, 1702,  448, 1702,  450, 1700,  450, 1702,  472, 1678,  472, 1678,  474, 1676,  472, 5298,  4300, 4462,  444, 1682,  466, 1734,  416, 658,  416, 1732,  418, 658,  418, 1732,  418, 658,  416, 1734,  418, 658,  416, 1734,  414, 1736,  416, 658,  416, 684,  390, 1760,  392, 1758,  392, 684,  390, 684,  390, 684,  366, 708,  366, 710,  366, 708,  366, 708,  366, 734,  342, 734,  342, 734,  342, 734,  340, 734,  340, 760,  316, 760,  314, 760,  314, 786,  288, 812,  262, 840,  236, 814,  260, 840,  232};  // COOLIX B2BF80

// 关空调指令
uint16_t ACoff[199] = {4470, 4424,  478, 1696,  452, 596,  484, 1694,  452, 1696,  454, 594,  484, 590,  482, 1696,  454, 592,  484, 592,  478, 1698,  454, 622,  448, 574,  480, 1720,  428, 1720,  430, 644,  430, 1720,  432, 642,  432, 1720,  486, 1664,  462, 1688,  498, 1652,  492, 584,  520, 1630,  496, 1654,  518, 1632,  520, 554,  520, 556,  518, 556,  520, 556,  518, 1630,  518, 558,  518, 556,  430, 1720,  440, 1686,  452, 1698,  468, 630,  448, 628,  472, 602,  472, 602,  450, 626,  450, 624,  476, 598,  478, 596,  478, 1672,  454, 1696,  480, 1668,  480, 1670,  482, 1668,  484, 5262,  4336, 4424,  480, 1670,  478, 596,  478, 1674,  476, 1672,  478, 596,  476, 596,  476, 1674,  476, 598,  476, 598,  476, 1676,  474, 598,  476, 598,  476, 1696,  452, 1698,  454, 600,  474, 1696,  454, 602,  472, 1698,  452, 1698,  450, 1700,  450, 1700,  452, 622,  452, 1700,  450, 1700,  450, 1702,  448, 626,  448, 628,  446, 628,  424, 650,  424, 1728,  420, 654,  420, 656,  418, 1732,  418, 1732,  442, 1710,  440, 634,  440, 634,  442, 634,  440, 634,  440, 634,  440, 656,  418, 656,  418, 656,  420, 1730,  418, 1732,  418, 1732,  418, 1732,  418, 1732,  418};  // COOLIX B27BE0

int khz = 38; // 38kHz carrier frequency for the NEC protocol

// 温度传感器
DFRobot_DHT11 DHT;

IRsend irsend(kIrLed);  // Set the GPIO to be used to sending the message.

boolean acIsOn = false;
void setup() {
  irsend.begin();
  Serial.begin(115200, SERIAL_8N1, SERIAL_TX_ONLY);
}

void loop() {
  Serial.println("loop");

  // 读取温湿度
  DHT.read(DHT11_PIN);
  Serial.print("temp:");
  int temp = DHT.temperature;
  int hum = DHT.humidity;
  Serial.print(temp);
  Serial.print("  humi:");
  Serial.println(hum);

  // 如果温度高于30度且空调未开启，则开启空调
  if (!acIsOn && temp >= 30) {
    irsend.sendRaw(ACon, sizeof(ACon) / sizeof(ACon[0]), khz); delay(2000); //Send
    acIsOn = true;
  }

  // 如果温度低于28度，且空调已开启，则关闭空调
  if (acIsOn && temp < 28) {
    //delay(10000);
    irsend.sendRaw(ACoff, sizeof(ACoff) / sizeof(ACoff[0]), khz); delay(2000);//Send
  }
  delay(2000);
}

```